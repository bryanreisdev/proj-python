{
    # Optional: global options
    email {$ACME_EMAIL}
}

{$DOMAIN} {
    encode gzip zstd

    @api {
        path /api/*
    }
    reverse_proxy @api backend:5000

    # Frontend estático (Nginx no container 'frontend')
    reverse_proxy frontend:80

    # Healthcheck simples
    @health {
        path /health
    }
    respond @health 200
}

# Fallback para IP/localhost sem domínio (útil para testes)
http://:80 {
    encode gzip zstd
    @api path /api/*
    reverse_proxy @api backend:5000
    reverse_proxy frontend:80
}


